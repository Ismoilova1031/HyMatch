# プロフィール登録機能

## 概要

HyMatchアプリのプロフィール登録機能は、登録者が求人応募に必要な情報を入力するための包括的なフォームです。

## 機能一覧

### 1. 基本情報
- **氏名**: 姓・名の分離入力
- **年齢**: 数値入力（16-100歳）
- **プロフィール写真**: 画像アップロード機能
- **国籍**: ドロップダウン選択
- **性別**: 男性/女性/その他

### 2. 最寄り駅情報
- **自宅最寄り駅**: 駅名と徒歩時間
- **学校最寄り駅**: 駅名と徒歩時間

### 3. 住所情報
- **郵便番号**: 7桁の数値入力
- **都道府県**: ドロップダウン選択（47都道府県）
- **市区町村1**: 必須入力
- **市区町村2**: 任意入力
- **番地・建物名**: 必須入力

### 4. 連絡先
- **メールアドレス**: 形式検証付き
- **電話番号**: 形式検証付き

### 5. 在留資格
- **現在のビザの種類**: ドロップダウン選択
- **在留資格画像**: 必須アップロード
- **変更予定**: チェックボックス
- **変更予定のビザの種類**: 条件付き表示
- **証明書画像**: 条件付きアップロード

### 6. その他の情報
- **日本語レベル**: N1〜N5選択
- **勤務希望曜日**: 複数選択可能
- **現在の職業**: 学生/会社員/無職/その他
- **希望の職種**: 自由入力
- **過去の職歴・バイト歴**: テキストエリア

## ファイル構成

```
├── screens/
│   └── ProfileEditScreen.tsx          # メインのプロフィール編集画面
├── components/
│   ├── ProfileCompletionModal.tsx     # プロフィール未完了時のモーダル
│   └── ProfileValidationExample.tsx   # 使用例
├── types/
│   └── profile.ts                     # プロフィール関連の型定義
├── utils/
│   └── profileValidation.ts           # プロフィール検証ロジック
└── constants/
    └── iconMap.ts                     # アイコン管理
```

## 使用方法

### 1. プロフィール編集画面の表示

```typescript
import { router } from 'expo-router';

// プロフィール編集画面に遷移
router.push('/screens/ProfileEditScreen');
```

### 2. プロフィール検証の実装

```typescript
import { validateProfileForJobApplication } from '@/utils/profileValidation';
import ProfileCompletionModal from '@/components/ProfileCompletionModal';

const handleJobApplication = () => {
  const missingFields = validateProfileForJobApplication(userProfile);
  
  if (missingFields.length > 0) {
    // プロフィール未完了モーダルを表示
    setShowModal(true);
    setMissingFields(missingFields);
  } else {
    // 求人応募処理を続行
    proceedWithApplication();
  }
};
```

### 3. プロフィール未完了モーダルの表示

```typescript
<ProfileCompletionModal
  visible={showModal}
  missingFields={missingFields}
  onClose={() => setShowModal(false)}
  onNavigateToProfile={() => {
    setShowModal(false);
    router.push('/screens/ProfileEditScreen');
  }}
/>
```

## 検証ルール

### 必須項目
- 氏名（姓・名）
- 年齢（16-100歳）
- 国籍
- 性別
- 自宅最寄り駅情報
- 学校最寄り駅情報
- 郵便番号（7桁）
- 都道府県
- 市区町村1
- 番地・建物名
- メールアドレス（形式検証）
- 電話番号（形式検証）
- 現在のビザの種類
- 在留資格画像
- 日本語レベル
- 勤務希望曜日（1つ以上）
- 現在の職業
- 希望の職種

### 形式検証
- **郵便番号**: 7桁の数字
- **メールアドレス**: 標準的なメール形式
- **電話番号**: 数字、ハイフン、括弧、プラス記号、スペースのみ許可

## UI/UX 特徴

### 1. セクション別表示
- 各情報カテゴリをセクションに分けて整理
- アコーディオン形式で開閉可能
- 視覚的に分かりやすい構造

### 2. リアルタイム検証
- 入力時にエラー表示
- 赤枠でエラー項目を強調
- エラーメッセージの表示

### 3. 画像アップロード
- プロフィール写真、在留資格画像、証明書画像のアップロード
- プレビュー機能
- ドラッグ&ドロップ風のUI

### 4. レスポンシブデザイン
- キーボード回避機能
- スクロール対応
- タッチフレンドリーなUI

## 技術仕様

### 依存関係
- `@react-native-picker/picker`: ドロップダウン選択
- `expo-image-picker`: 画像選択・アップロード
- `expo-router`: 画面遷移

### 型安全性
- TypeScriptによる完全な型定義
- プロフィールデータの型安全性確保
- 検証エラーの型定義

### パフォーマンス
- 効率的な状態管理
- 不要な再レンダリングの防止
- メモリリークの防止

## 今後の拡張予定

1. **住所自動入力**: 郵便番号から住所の自動取得
2. **画像圧縮**: アップロード画像の自動圧縮
3. **オフライン対応**: データのローカル保存
4. **多言語対応**: 英語・中国語・韓国語対応
5. **バリデーション強化**: より詳細な入力チェック

## トラブルシューティング

### よくある問題

1. **画像がアップロードできない**
   - デバイスのカメラ・写真ライブラリの権限を確認
   - 画像サイズが大きすぎないか確認

2. **フォームが保存されない**
   - 必須項目がすべて入力されているか確認
   - エラーメッセージを確認

3. **画面が表示されない**
   - 依存関係が正しくインストールされているか確認
   - TypeScriptの型エラーがないか確認

## ライセンス

このプロフィール登録機能は HyMatch プロジェクトの一部です。 